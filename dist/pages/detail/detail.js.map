{"version":3,"sources":["webpack:///./src/pages/detail/detail.js"],"names":["app","getApp","Page","data","listId","loading","listData","artileDate","onLoad","that","wx","showShareMenu","withShareTicket","globalData","listDatas","showLoading","title","mask","getList","options","id","res","onPullDownRefresh","setData","showNavigationBarLoading","sendQuest","hideNavigationBarLoading","stopPullDownRefresh","i","length","setNavigationBarTitle","articles","body","articdata","towxml","toJson","theme","callback","request","url","method","dataType","success","hideLoading","statusCode","console","log","errMsg"],"mappings":";;;;;;;;AAAA,IAAMA,MAAMC,QAAZ;AACAC,KAAK;AACHC,QAAK;AACHC,YAAO,EADJ;AAEHC,aAAQ,IAFL;AAGHC,cAAS,EAHN;AAIHC,gBAAW;AAJR,GADF;AAOHC,UAAQ,kBAAU;AAChB,QAAIC,OAAO,IAAX;AACA;AACAC,OAAGC,aAAH,CAAiB;AACfC,uBAAiB;AADF,KAAjB;AAGA,QAAG,CAACZ,IAAIa,UAAJ,CAAeC,SAAnB,EAA6B;AAC3BJ,SAAGK,WAAH,CAAe;AACbC,eAAO,KADM;AAEbC,cAAM;AAFO,OAAf;AAIAR,WAAKS,OAAL,CAAaT,KAAKU,OAAL,CAAaC,EAA1B,EAA6BC,IAAIlB,IAAjC;AACD,KAND,MAMM;AACJM,WAAKS,OAAL,CAAaT,KAAKU,OAAL,CAAaC,EAA1B,EAA6BpB,IAAIa,UAAJ,CAAeC,SAA5C;AACD;AACF,GAtBE;AAuBHQ,qBAAmB,6BAAU;AAC3B,QAAIb,OAAO,IAAX;AACAA,SAAKc,OAAL,CAAa;AACXjB,gBAAS,EADE;AAEXD,eAAQ;AAFG,KAAb;AAIAK,OAAGc,wBAAH,GAN2B,CAMG;AAC9B,SAAKC,SAAL,CAAe,UAASJ,GAAT,EAAa;AAC1BZ,WAAKS,OAAL,CAAaT,KAAKU,OAAL,CAAaC,EAA1B,EAA6BC,IAAIlB,IAAjC;AACAO,SAAGgB,wBAAH,GAF0B,CAEI;AAC9BhB,SAAGiB,mBAAH,GAH0B,CAGD;AAC1B,KAJD;AAKD,GAnCE;AAoCHT,WAAS,iBAASE,EAAT,EAAYjB,IAAZ,EAAiB;AACxB,QAAIM,OAAO,IAAX;AACAA,SAAKc,OAAL,CAAa;AACXnB,cAAOgB,EADI;AAEXd,gBAASH;AAFE,KAAb;AAIA,SAAI,IAAIyB,IAAE,CAAV,EAAYA,IAAEzB,KAAK0B,MAAnB,EAA0BD,GAA1B,EAA8B;AAC5B,UAAGnB,KAAKU,OAAL,CAAaC,EAAb,IAAmBjB,KAAKyB,CAAL,EAAQR,EAA9B,EAAiC;AAC7BV,WAAGoB,qBAAH,CAAyB;AACvBd,iBAAOb,KAAKyB,CAAL,EAAQZ;AADQ,SAAzB;AAGA,YAAIe,WAAW5B,KAAKyB,CAAL,EAAQI,IAAvB;AACA;AACA,YAAIC,YAAYjC,IAAIkC,MAAJ,CAAWC,MAAX,CAAkBJ,QAAlB,EAA2B,UAA3B,CAAhB;AACA;AACAE,kBAAUG,KAAV,GAAkB,OAAlB;AACA3B,aAAKc,OAAL,CAAa;AACXhB,sBAAW0B,SADA;AAEX5B,mBAAQ;AAFG,SAAb;AAIH;AACF;AACF,GA1DE;AA2DHoB,aAAW,mBAASY,QAAT,EAAkB;AAC3B,QAAI5B,OAAO,IAAX;AACA;AACAC,OAAG4B,OAAH,CAAW;AACTC,WAAI,+BADK;AAETC,cAAO,KAFE;AAGTC,gBAAS,MAHA;AAITC,eAAQ,iBAASrB,GAAT,EAAa;AACnBX,WAAGiC,WAAH;AACA,YAAGtB,IAAIuB,UAAJ,IAAkB,GAArB,EAAyB;AACvB,cAAGP,QAAH,EAAY;AACVA,qBAAShB,GAAT;AACD;AACF,SAJD,MAIM;AACJwB,kBAAQC,GAAR,CAAYzB,IAAI0B,MAAhB;AACD;AACF;AAbQ,KAAX;AAeD;AA7EE,CAAL,E","file":"pages/detail/detail.js","sourcesContent":["const app = getApp();\nPage({\n  data:{\n    listId:'',\n    loading:true,\n    listData:'',\n    artileDate:''\n  },\n  onLoad: function(){\n    var that = this;\n    //微信转发功能\n    wx.showShareMenu({\n      withShareTicket: true\n    });\n    if(!app.globalData.listDatas){\n      wx.showLoading({\n        title: '加载中',\n        mask: true\n      });\n      that.getList(that.options.id,res.data);\n    }else {\n      that.getList(that.options.id,app.globalData.listDatas);\n    }\n  },\n  onPullDownRefresh: function(){\n    var that = this;\n    that.setData({\n      listData:'',\n      loading:true,\n    });\n    wx.showNavigationBarLoading() //在标题栏中显示加载\n    this.sendQuest(function(res){\n      that.getList(that.options.id,res.data);\n      wx.hideNavigationBarLoading() //完成停止加载\n      wx.stopPullDownRefresh() //停止下拉刷新\n    });\n  },\n  getList: function(id,data){\n    var that = this;\n    that.setData({\n      listId:id,\n      listData:data\n    });\n    for(var i=0;i<data.length;i++){\n      if(that.options.id == data[i].id){\n          wx.setNavigationBarTitle({\n            title: data[i].title\n          });\n          var articles = data[i].body;\n          //将markdown内容转换为towxml数据\n          let articdata = app.towxml.toJson(articles,'markdown');\n          //设置文档显示主题，默认'light'\n          articdata.theme = 'light';\n          that.setData({\n            artileDate:articdata,\n            loading:false\n          });\n      }\n    }\n  },\n  sendQuest: function(callback){\n    var that = this;\n    //涉及到域名问题正式项目\n    wx.request({\n      url:'https://lcl101.cn/api/getList',\n      method:'GET',\n      dataType:'json',\n      success:function(res){\n        wx.hideLoading();\n        if(res.statusCode == 200){\n          if(callback){\n            callback(res);\n          }\n        }else {\n          console.log(res.errMsg)\n        }\n      }\n    })\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/detail/detail.js"],"sourceRoot":""}