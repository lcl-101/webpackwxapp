{"version":3,"sources":["webpack:///./src/pages/label/label.js"],"names":["app","getApp","Page","data","title","loading","label","list","typeData","onLoad","that","wx","showShareMenu","withShareTicket","globalData","listDatas","showLoading","mask","sendQuest","res","setData","getList","onPullDownRefresh","showNavigationBarLoading","hideNavigationBarLoading","stopPullDownRefresh","lableData","i","length","push","labels","name","Array","from","Set","getlistType","console","log","j","callback","request","url","method","dataType","success","hideLoading","statusCode","errMsg"],"mappings":"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","file":"pages/label/label.js","sourcesContent":["const app = getApp();\n\nPage({\n  data:{\n    title:'全部',\n    loading:true,\n    label:'',\n    list:'',\n    typeData:''\n  },\n  onLoad: function(){\n    var that = this;\n    //微信转发功能\n    wx.showShareMenu({\n      withShareTicket: true\n    });\n    if(!app.globalData.listDatas){\n      wx.showLoading({\n        title: '加载中',\n        mask: true\n      });\n      this.sendQuest(function(res){\n        that.setData({\n          list:res.data,\n          loading:false\n        });\n        that.getList(res.data);\n      });\n    }else {\n      that.setData({\n        loading:false,\n        list:app.globalData.listDatas\n      });\n      that.getList(app.globalData.listDatas);\n    }\n  },\n  onPullDownRefresh: function(){\n    var that = this;\n    that.setData({\n      list:'',\n      loading:true,\n      typeData:\"\"\n    });\n    wx.showNavigationBarLoading() //在标题栏中显示加载\n    this.sendQuest(function(res){\n      that.setData({\n        list:res.data,\n        loading:false\n      });\n      that.getList(res.data);\n      wx.hideNavigationBarLoading() //完成停止加载\n      wx.stopPullDownRefresh() //停止下拉刷新\n    });\n  },\n  //获取列表分类名\n  getList: function(data){\n    var that = this;\n    var lableData = [];\n    for(var i=0;i<data.length;i++){\n      lableData.push(data[i].labels[0].name);\n    }\n    that.setData({\n      label:Array.from(new Set(lableData))\n    });\n    that.getlistType();\n  },\n  //对数据进行分类存储\n  getlistType: function(){\n    var that = this;\n    var data = {};\n    console.log(this);\n    for(var i=0;i<this.data.label.length;i++){\n      data[i]  = [];\n      for(var j=0;j<this.data.list.length;j++){\n        if(this.data.label[i] == this.data.list[j].labels[0].name){\n          data[i].push(this.data.list[j]);\n        }\n      }\n    }\n    console.log(data);\n    that.setData({\n      typeData:data,\n    });\n  },\n  sendQuest: function(callback){\n    var that = this;\n    //涉及到域名问题正式项目\n    wx.request({\n      url:'https://lcl101.cn/api/getList',\n      method:'GET',\n      dataType:'json',\n      success:function(res){\n        wx.hideLoading();\n        if(res.statusCode == 200){\n          app.globalData.listDatas = res.data;\n          if(callback){\n            callback(res);\n          }\n        }else {\n          console.log(res.errMsg)\n        }\n      }\n    })\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/label/label.js"],"sourceRoot":""}